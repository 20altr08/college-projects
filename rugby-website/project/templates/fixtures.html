{% extends "base.html" %}
{% block title %}Fixtures{% endblock %}

{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='fixtures.css') }}">

<div class="league">

    <div class="fixtures">
        <h1>Upcoming Fixtures</h1>
        <div class="menu">
            <div class="dropdown">
                <button class="dropbtn">Leagues</button>
                  <div class="dropdown-content">

                      {% for league, _ in fixtures|groupby("league_name") %}
                            <a href="#{{ league }}">{{ league }}</a>
                      {% endfor %}

                  </div>
            </div>
        </div>


        {% if fixtures %}
            {# --- Group fixtures by league --- #}
            {% for league, league_fixtures in fixtures|groupby("league_name") %}

                <div class="fixture-container" id="{{ league }}">
                    <h2 class="league-title" style="text-align: center;">{{ league }}</h2>
                    {% for fixture in league_fixtures %}

                        {% if fixture.result %}
                            <span style="color: green; text-align: left;">‚úî Result available</span>
                        {% else %}
                            <span style="color: red;">‚úò No result yet</span>
                        {% endif %}

                        <p class="date">
                            {{ fixture.date.strftime('%A %B %Y') }}
                        </p>

                        <div class="fixture-container-2">

                            <div class="fixture-container-clubs">

                                <div class="fixture-container-clubs-2">
                                    <p>{{ fixture.team1.name }}</p>
                                    <img src="/static/assets/{{ fixture.team1.logo }}">
                                </div>

                                <h1>{{ fixture.time.strftime('%I:%M %p') }}</h1>

                                <div class="fixture-container-clubs-2">
                                    <img src="/static/assets/{{ fixture.team2.logo }}">
                                    <p>{{ fixture.team2.name }}</p>
                                </div>

                            </div>

                            <p class="fixture-container-venue">üèüÔ∏è {{ fixture.venue }}</p>

                            <div class="fixture-matchlink">
                                <a href="{{ url_for('main.matchdetails', fixture_id=fixture.id) }}">
                                    Match Details ‚ûú
                                </a>
                            </div>

                        </div>

                    {% endfor %}

                </div>

            {% endfor %}

        {% else %}
            <p>No fixtures scheduled.</p>
        {% endif %}

    </div>
</div>

{% endblock %}
